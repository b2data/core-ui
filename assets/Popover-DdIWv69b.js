import{r as l,u as ho,c as Po,j as S}from"./iframe-BjsjcTCH.js";import{g as go}from"./generateUtilityClass-BtcU_pBl.js";import{g as vo}from"./generateUtilityClasses-DDbjFgb8.js";import{u as C}from"./useSlot-_7UiI0BH.js";import{o as X}from"./ownerDocument-DW-IO8s5.js";import{o as Y}from"./ownerWindow-HkKU3E4x.js";import{d as yo}from"./debounce-Be36O1Ab.js";import{G as wo}from"./Grow-B45jD6oF.js";import{m as bo}from"./mergeSlotProps-Dw6Vk27m.js";import{s as Q,c as xo}from"./styled-B_VYI8z9.js";import{i as Eo}from"./isHostComponent-DVu5iVWx.js";import{M as So}from"./Modal-BlMYs-AT.js";import{P as Co}from"./Paper-CztJE2D3.js";function To(t){return go("MuiPopover",t)}vo("MuiPopover",["root","paper"]);function q(t,e){let s=0;return typeof e=="number"?s=e:e==="center"?s=t.height/2:e==="bottom"&&(s=t.height),s}function J(t,e){let s=0;return typeof e=="number"?s=e:e==="center"?s=t.width/2:e==="right"&&(s=t.width),s}function K(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function y(t){return typeof t=="function"?t():t}const Oo=t=>{const{classes:e}=t;return xo({root:["root"],paper:["paper"]},To,e)},ko=Q(So,{name:"MuiPopover",slot:"Root"})({}),zo=Q(Co,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Io=l.forwardRef(function(e,s){const T=ho({props:e,name:"MuiPopover"}),{action:Z,anchorEl:p,anchorOrigin:m={vertical:"top",horizontal:"left"},anchorPosition:O,anchorReference:h="anchorEl",children:_,className:oo,container:to,elevation:k=8,marginThreshold:i=16,open:f,PaperProps:eo={},slots:z={},slotProps:v={},transformOrigin:P={vertical:"top",horizontal:"left"},TransitionComponent:R,transitionDuration:w="auto",TransitionProps:M={},disableScrollLock:b=!1,...ro}=T,x=l.useRef(),g={...T,anchorOrigin:m,anchorReference:h,elevation:k,marginThreshold:i,transformOrigin:P,TransitionComponent:R,transitionDuration:w,TransitionProps:M},W=Oo(g),j=l.useCallback(()=>{if(h==="anchorPosition")return O;const o=y(p),n=(o&&o.nodeType===1?o:X(x.current).body).getBoundingClientRect();return{top:n.top+q(n,m.vertical),left:n.left+J(n,m.horizontal)}},[p,m.horizontal,m.vertical,O,h]),D=l.useCallback(o=>({vertical:q(o,P.vertical),horizontal:J(o,P.horizontal)}),[P.horizontal,P.vertical]),H=l.useCallback(o=>{const r={width:o.offsetWidth,height:o.offsetHeight},n=D(r);if(h==="none")return{top:null,left:null,transformOrigin:K(n)};const N=j();let u=N.top-n.vertical,d=N.left-n.horizontal;const $=u+r.height,G=d+r.width,I=Y(y(p)),B=I.innerHeight-i,V=I.innerWidth-i;if(i!==null&&u<i){const a=u-i;u-=a,n.vertical+=a}else if(i!==null&&$>B){const a=$-B;u-=a,n.vertical+=a}if(i!==null&&d<i){const a=d-i;d-=a,n.horizontal+=a}else if(G>V){const a=G-V;d-=a,n.horizontal+=a}return{top:`${Math.round(u)}px`,left:`${Math.round(d)}px`,transformOrigin:K(n)}},[p,h,j,D,i]),[no,L]=l.useState(f),c=l.useCallback(()=>{const o=x.current;if(!o)return;const r=H(o);r.top!==null&&o.style.setProperty("top",r.top),r.left!==null&&(o.style.left=r.left),o.style.transformOrigin=r.transformOrigin,L(!0)},[H]);l.useEffect(()=>(b&&window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)),[p,b,c]);const so=()=>{c()},io=()=>{L(!1)};l.useEffect(()=>{f&&c()}),l.useImperativeHandle(Z,()=>f?{updatePosition:()=>{c()}}:null,[f,c]),l.useEffect(()=>{if(!f)return;const o=yo(()=>{c()}),r=Y(y(p));return r.addEventListener("resize",o),()=>{o.clear(),r.removeEventListener("resize",o)}},[p,f,c]);let A=w;const E={slots:{transition:R,...z},slotProps:{transition:M,paper:eo,...v}},[F,ao]=C("transition",{elementType:wo,externalForwardedProps:E,ownerState:g,getSlotProps:o=>({...o,onEntering:(r,n)=>{o.onEntering?.(r,n),so()},onExited:r=>{o.onExited?.(r),io()}}),additionalProps:{appear:!0,in:f}});w==="auto"&&!F.muiSupportAuto&&(A=void 0);const lo=to||(p?X(y(p)).body:void 0),[U,{slots:po,slotProps:co,...fo}]=C("root",{ref:s,elementType:ko,externalForwardedProps:{...E,...ro},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:z.backdrop},slotProps:{backdrop:bo(typeof v.backdrop=="function"?v.backdrop(g):v.backdrop,{invisible:!0})},container:lo,open:f},ownerState:g,className:Po(W.root,oo)}),[uo,mo]=C("paper",{ref:x,className:W.paper,elementType:zo,externalForwardedProps:E,shouldForwardComponentProp:!0,additionalProps:{elevation:k,style:no?void 0:{opacity:0}},ownerState:g});return S.jsx(U,{...fo,...!Eo(U)&&{slots:po,slotProps:co,disableScrollLock:b},children:S.jsx(F,{...ao,timeout:A,children:S.jsx(uo,{...mo,children:_})})})});export{zo as P,Io as a};
